(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=c(n);fetch(n.href,r)}})();const x=document.querySelector(".submitBtn"),k="171c28a2dc0957941680747b5a775d1b",M="https://api.openweathermap.org/data/2.5/weather?units=metric&q=",I="https://api.opentripmap.com/0.1/en/places/",L="5ae2e3f221c38a28845f05b67a4efd428d2e3973acfdb186db7def8c",$="https://restcountries.com/v3.1/alpha/",D=document.querySelector(".currentDate"),d=document.querySelector(".card-name"),f=document.querySelector(".card-currency"),m=document.querySelector(".card-country"),p=document.querySelector(".card-location-link");document.querySelector(".card-location");const u=document.querySelector(".card-main-error"),h=document.querySelector(".card-timezone"),U=document.querySelector(".card-localtime"),C=document.querySelector(".card-info"),g=document.querySelector(".temperature"),b=document.querySelector(".temperature-feels_like"),T=document.querySelector(".humidity"),S=document.querySelector(".wind"),l=C;async function v(e){try{const t=$+e,o=await(await fetch(t)).json();return console.log("search input Code Country:  "+e),o}catch(t){throw console.error("Ошибка запроса in fetchCountry:",t),t}}async function A(){try{const e=document.querySelector("#input").value,t=M+e+`&appid=${k}`,o=await(await fetch(t)).json();return console.log("search input Weather:  "+e),o}catch(e){throw console.error("Ошибка запроса in fetchWeather:",e),e}}async function j(){try{const e=document.querySelector("#input").value,t=await y("geoname",`name=${e}`);console.log("search input Info:  "+e);const c=t.lon,o=t.lat,n=await y("radius",`radius=1000&lon=${c}&lat=${o}&format=json&limit=5`);if(console.log("Достопримечательности:",n),Array.isArray(n)&&n.length>0){const r=n.map(i=>i.name).join(", ");l.textContent=`Attractions: ${r}`}else l.textContent="Данные о достопримечательностях отсутствуют в ответе API";return t}catch(e){throw console.error("Ошибка запроса in fetchInfo:",e),e}}function y(e,t){return new Promise(function(c,o){let n=I+e+"?apikey="+L;t!==void 0&&(n+=`&${t}`),fetch(n).then(r=>r.json()).then(r=>{c(r)}).catch(function(r){o(r),console.error("Ошибка запроса:",r),l.textContent="Произошла ошибка при запросе к API"})})}function O(){document.querySelector(".card_main").style.display="flex",u.style.display="none",f.textContent="",m.textContent="",p.href="",d.textContent="",C.textContent="",h.textContent="",g.textContent="",b.textContent="",T.textContent="",S.textContent=""}function H(e){let t=e[0].currencies[Object.keys(e[0].currencies)[0]].name+" ("+e[0].currencies[Object.keys(e[0].currencies)[0]].symbol+")";f.textContent="Currency: "+t,p.href=e[0].maps.googleMaps,m.textContent="Country: "+e[0].name.common}function W(e){g.innerHTML="Temperature: "+Math.round(e.main.temp)+"&#8451",b.innerHTML="Feels like: "+Math.round(e.main.feels_like)+"&#8451",T.textContent="Humidity: "+e.main.humidity+"%",S.textContent="Wind: "+e.wind.speed+" km/h"}function z(e){let t=e.name;t=t[0].toUpperCase()+t.substring(1),d.textContent=t,h.textContent="Timezone: "+e.timezone}function q(e){switch(e){case 0:e="Jan.";break;case 1:e="Feb.";break;case 2:e="Mar.";break;case 3:e="Apr.";break;case 4:e="May";break;case 5:e="June";break;case 6:e="July";break;case 7:e="Aug.";break;case 8:e="Sept.";break;case 9:e="Oct.";break;case 10:e="Nov.";break;case 11:e="Dec.";break}return e}function s(e){return e<10&&(e="0"+e),e}function P(e){let t=e.getFullYear(),c=q(e.getMonth()),o=e.getDate(),n=s(e.getHours()),r=s(e.getMinutes());return`${o} ${c} ${t} ${n}:${r}`}function F(e){let t=e.getUTCFullYear(),c=q(e.getUTCMonth()),o=e.getUTCDate(),n=s(e.getUTCHours()),r=s(e.getUTCMinutes());return`${o} ${c} ${t} ${n}:${r}`}function w(){let e=new Date;D.innerHTML="Today is "+P(e),setInterval(console.log("inc 1 sec"),1e3)}function N(e){console.log("====  localTimeMainCard ===");let t=new Date;console.log(e.timezone," ",e.dt);let c=t.getTime()/1e3+e.timezone;U.textContent="Local Time: "+F(new Date(c*1e3))}let a=[];function E(e){const t=[];return e&&t.push("Error in get request"),t.length?t.join(`. 
`):""}function _(e){a=[];let t=document.querySelector(".card-main-error");t.textContent="",a.push(E(e)),a.length>0&&(t.classList.remove("errorsInfo-content"),t.classList.add("errorsInfo"),t.innerHTML=a.join(".  <br>"))}w();u.style.display="none";x.addEventListener("click",async function(){event.preventDefault(),w(),O();const e=document.querySelector(".loading-spinner");e.style.display="block";try{const t=await j();console.log("Data City Info:",t),z(t);const c=await v(t.country);console.log("Data Country:",c),H(c);const o=await A();console.log("Data Weather:",o),W(o),N(o),document.querySelector("#input").value=""}catch(t){u.style.display="flex",console.error("Error:",t),_(t)}finally{e.style.display="none",document.querySelector("#input").value=""}});
