(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const S=document.querySelector(".submitBtn"),p=document.querySelector(".card-name"),f=document.querySelector(".card-currency"),h=document.querySelector(".card-country"),g=document.querySelector(".card-timezone-link"),l=document.querySelector(".card-main-error");l.style.display="none";S.addEventListener("click",k);function k(){let e=document.querySelector("#input");document.querySelector(".card_main").style.display="flex",console.log("City input: "+e.value),I(e.value),l.style.display="none",f.textContent="",h.textContent="",g.href="",p.textContent=""}function q(e){f.textContent="Currency: "+e}function L(e){h.textContent="Country: "+e}function x(e){p.textContent=e}function M(e){g.href=e,console.log("location: "+e)}async function I(e){try{const r=await(await fetch("https://restcountries.com/v3.1/capital/"+e)).json();console.log(r),q(r[0].currencies[Object.keys(r[0].currencies)[0]].name+" ("+r[0].currencies[Object.keys(r[0].currencies)[0]].symbol+")"),x(r[0].capital),L(r[0].name.common),M(r[0].maps.googleMaps)}catch(t){l.style.display="flex",console.error("Ошибка в поиске города:",t),l.textContent=`Ошибка в поиске города: 
`+t.name+" ----> для полной информации необходимо ввести столицу"}}const w="171c28a2dc0957941680747b5a775d1b",v="https://api.openweathermap.org/data/2.5/weather?units=metric&q=",d=document.querySelector(".autocompleteInput"),A=document.querySelector(".submitBtn");async function b(e){try{const r=await(await fetch(v+e+`&appid=${w}`)).json();console.log(r),document.querySelector(".temperature").innerHTML="Temperature: "+Math.round(r.main.temp)+"&#8451",document.querySelector(".temperature-feels_like").innerHTML="Feels like: "+Math.round(r.main.feels_like)+"&#8451",document.querySelector(".humidity").innerHTML="Humidity: "+r.main.humidity+"%",document.querySelector(".wind").innerHTML="Wind: "+r.wind.speed+"km/h"}catch(t){console.log(t),document.querySelector(".temperature").innerHTML="Error: No information found",document.querySelector(".temperature-feels_like").innerHTML="",document.querySelector(".humidity").innerHTML="",document.querySelector(".wind").innerHTML=""}}A.addEventListener("click",()=>{b(d.value)});d.addEventListener("keydown",e=>{e.keyCode===13&&b(d.value)});const P=document.querySelector(".currentDate");let u=new Date,T=u.getFullYear(),c=u.getMonth(),$=u.getDate(),E=C(u.getHours()),H=C(u.getMinutes());function C(e){return e<10&&(e="0"+e),e}switch(c){case 0:c="Jan.";break;case 1:c="Feb.";break;case 2:c="Mar.";break;case 3:c="Apr.";break;case 4:c="May";break;case 5:c="June";break;case 6:c="July";break;case 7:c="Aug.";break;case 8:c="Sept.";break;case 9:c="Oct.";break;case 10:c="Nov.";break;case 11:c="Dec.";break}P.innerHTML="Today is "+$+" "+c+" "+T+"   "+E+":"+H;const N="5ae2e3f221c38a28845f05b67a4efd428d2e3973acfdb186db7def8c",a=document.querySelector(".card-info");function y(e,t){return console.log("query: "+t),new Promise(function(r,i){var n="https://api.opentripmap.com/0.1/en/places/"+e+"?apikey="+N;t!==void 0&&(n+=`&${t}`),fetch(n).then(o=>o.json()).then(o=>{r(o)}).catch(function(o){i(o),console.error("Ошибка запроса:",o),a.textContent="Произошла ошибка при запросе к API"})})}document.querySelector(".submitBtn").addEventListener("click",function(){const e=document.getElementById("input").value;y("geoname",`name=${e}`).then(t=>{if(console.log("Данные по городу:",t),t.error){a.textContent="Город не найден в базе данных OpenTripMap";return}const r=t.lon,i=t.lat;y("radius",`radius=1000&lon=${r}&lat=${i}&format=json&limit=5`).then(n=>{if(console.log("Достопримечательности:",n),Array.isArray(n)&&n.length>0){const o=n.map(s=>s.name).join(", ");a.textContent=`Attractions: ${o}`}else a.textContent="Данные о достопримечательностях отсутствуют в ответе API"}).catch(n=>{console.error("Ошибка получения данных о достопримечательностях:",n),a.textContent="Произошла ошибка при запросе к API (достопримечательности)"})}).catch(t=>{console.error("Ошибка получения данных по этому городу:",t),a.textContent="Произошла ошибка при запросе к API"})});const O="5ae2e3f221c38a28845f05b67a4efd428d2e3973acfdb186db7def8c",m=document.querySelector(".card-timezone");function j(e,t){return console.log("query: "+t),new Promise(function(r,i){var n="https://api.opentripmap.com/0.1/en/places/"+e+"?apikey="+O;t!==void 0&&(n+=`&${t}`),fetch(n).then(o=>o.json()).then(o=>{r(o)}).catch(function(o){i(o),console.error("Ошибка запроса:",o),m.textContent="Произошла ошибка при запросе к API"})})}document.querySelector(".submitBtn").addEventListener("click",function(){const e=document.getElementById("input").value;j("geoname",`name=${e}`).then(t=>{console.log("Geoname Data:",t),m.textContent=`Region: ${t.timezone}`}).catch(t=>{console.error("Error fetching Geoname data:",t),m.textContent="Произошла ошибка при запросе к API"})});document.querySelector(".card_main").style.display="none";
